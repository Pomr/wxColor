var parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"RjpZ":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function n(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var i="bondSDK",r=function(){function t(){e(this,t),this.init()}return n(t,[{key:"init",value:function(){var e=localStorage.getItem(i);if(""===e||null==e)this.userData={};else try{this.userData=JSON.parse(e)}catch(t){console.log("userData解析错误",t)}}},{key:"getItem",value:function(e){return this.userData[e]}},{key:"setItem",value:function(e,t){this.userData[e]=t,this.save()}},{key:"getUserId",value:function(){return this.userData.userId}},{key:"setUserId",value:function(e){this.userData.userId=e,this.save()}},{key:"save",value:function(){localStorage.setItem(i,JSON.stringify(this.userData))}}],[{key:"instance",get:function(){return this._instance&&this._instance.userData?this._instance:(this._instance=new t,this._instance)}}]),t}();exports.default=r,a(r,"_instance",null);
},{}],"L5vu":[function(require,module,exports) {
var define;
var o;window.LZString=function(){function o(o,r){if(!t[o]){t[o]={};for(var n=0;n<o.length;n++)t[o][o.charAt(n)]=n}return t[o][r]}var r=String.fromCharCode,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",t={},i={compressToBase64:function(o){if(null==o)return"";var r=i._compress(o,6,function(o){return n.charAt(o)});switch(r.length%4){default:case 0:return r;case 1:return r+"===";case 2:return r+"==";case 3:return r+"="}},decompressFromBase64:function(r){return null==r?"":""==r?null:i._decompress(r.length,32,function(e){return o(n,r.charAt(e))})},compressToUTF16:function(o){return null==o?"":i._compress(o,15,function(o){return r(o+32)})+" "},decompressFromUTF16:function(o){return null==o?"":""==o?null:i._decompress(o.length,16384,function(r){return o.charCodeAt(r)-32})},compressToUint8Array:function(o){for(var r=i.compress(o),n=new Uint8Array(2*r.length),e=0,t=r.length;t>e;e++){var s=r.charCodeAt(e);n[2*e]=s>>>8,n[2*e+1]=s%256}return n},decompressFromUint8Array:function(o){if(null==o)return i.decompress(o);for(var n=new Array(o.length/2),e=0,t=n.length;t>e;e++)n[e]=256*o[2*e]+o[2*e+1];var s=[];return n.forEach(function(o){s.push(r(o))}),i.decompress(s.join(""))},compressToEncodedURIComponent:function(o){return null==o?"":i._compress(o,6,function(o){return e.charAt(o)})},decompressFromEncodedURIComponent:function(r){return null==r?"":""==r?null:(r=r.replace(/ /g,"+"),i._decompress(r.length,32,function(n){return o(e,r.charAt(n))}))},compress:function(o){return i._compress(o,16,function(o){return r(o)})},_compress:function(o,r,n){if(null==o)return"";var e,t,i,s={},p={},u="",c="",a="",l=2,f=3,h=2,d=[],m=0,v=0;for(i=0;i<o.length;i+=1)if(u=o.charAt(i),Object.prototype.hasOwnProperty.call(s,u)||(s[u]=f++,p[u]=!0),c=a+u,Object.prototype.hasOwnProperty.call(s,c))a=c;else{if(Object.prototype.hasOwnProperty.call(p,a)){if(a.charCodeAt(0)<256){for(e=0;h>e;e++)m<<=1,v==r-1?(v=0,d.push(n(m)),m=0):v++;for(t=a.charCodeAt(0),e=0;8>e;e++)m=m<<1|1&t,v==r-1?(v=0,d.push(n(m)),m=0):v++,t>>=1}else{for(t=1,e=0;h>e;e++)m=m<<1|t,v==r-1?(v=0,d.push(n(m)),m=0):v++,t=0;for(t=a.charCodeAt(0),e=0;16>e;e++)m=m<<1|1&t,v==r-1?(v=0,d.push(n(m)),m=0):v++,t>>=1}0==--l&&(l=Math.pow(2,h),h++),delete p[a]}else for(t=s[a],e=0;h>e;e++)m=m<<1|1&t,v==r-1?(v=0,d.push(n(m)),m=0):v++,t>>=1;0==--l&&(l=Math.pow(2,h),h++),s[c]=f++,a=String(u)}if(""!==a){if(Object.prototype.hasOwnProperty.call(p,a)){if(a.charCodeAt(0)<256){for(e=0;h>e;e++)m<<=1,v==r-1?(v=0,d.push(n(m)),m=0):v++;for(t=a.charCodeAt(0),e=0;8>e;e++)m=m<<1|1&t,v==r-1?(v=0,d.push(n(m)),m=0):v++,t>>=1}else{for(t=1,e=0;h>e;e++)m=m<<1|t,v==r-1?(v=0,d.push(n(m)),m=0):v++,t=0;for(t=a.charCodeAt(0),e=0;16>e;e++)m=m<<1|1&t,v==r-1?(v=0,d.push(n(m)),m=0):v++,t>>=1}0==--l&&(l=Math.pow(2,h),h++),delete p[a]}else for(t=s[a],e=0;h>e;e++)m=m<<1|1&t,v==r-1?(v=0,d.push(n(m)),m=0):v++,t>>=1;0==--l&&(l=Math.pow(2,h),h++)}for(t=2,e=0;h>e;e++)m=m<<1|1&t,v==r-1?(v=0,d.push(n(m)),m=0):v++,t>>=1;for(;;){if(m<<=1,v==r-1){d.push(n(m));break}v++}return d.join("")},decompress:function(o){return null==o?"":""==o?null:i._decompress(o.length,32768,function(r){return o.charCodeAt(r)})},_decompress:function(o,n,e){var t,i,s,p,u,c,a,l=[],f=4,h=4,d=3,m="",v=[],w={val:e(0),position:n,index:1};for(t=0;3>t;t+=1)l[t]=t;for(s=0,u=Math.pow(2,2),c=1;c!=u;)p=w.val&w.position,w.position>>=1,0==w.position&&(w.position=n,w.val=e(w.index++)),s|=(p>0?1:0)*c,c<<=1;switch(s){case 0:for(s=0,u=Math.pow(2,8),c=1;c!=u;)p=w.val&w.position,w.position>>=1,0==w.position&&(w.position=n,w.val=e(w.index++)),s|=(p>0?1:0)*c,c<<=1;a=r(s);break;case 1:for(s=0,u=Math.pow(2,16),c=1;c!=u;)p=w.val&w.position,w.position>>=1,0==w.position&&(w.position=n,w.val=e(w.index++)),s|=(p>0?1:0)*c,c<<=1;a=r(s);break;case 2:return""}for(l[3]=a,i=a,v.push(a);;){if(w.index>o)return"";for(s=0,u=Math.pow(2,d),c=1;c!=u;)p=w.val&w.position,w.position>>=1,0==w.position&&(w.position=n,w.val=e(w.index++)),s|=(p>0?1:0)*c,c<<=1;switch(a=s){case 0:for(s=0,u=Math.pow(2,8),c=1;c!=u;)p=w.val&w.position,w.position>>=1,0==w.position&&(w.position=n,w.val=e(w.index++)),s|=(p>0?1:0)*c,c<<=1;l[h++]=r(s),a=h-1,f--;break;case 1:for(s=0,u=Math.pow(2,16),c=1;c!=u;)p=w.val&w.position,w.position>>=1,0==w.position&&(w.position=n,w.val=e(w.index++)),s|=(p>0?1:0)*c,c<<=1;l[h++]=r(s),a=h-1,f--;break;case 2:return v.join("")}if(0==f&&(f=Math.pow(2,d),d++),l[a])m=l[a];else{if(a!==h)return null;m=i+i.charAt(0)}v.push(m),l[h++]=i+m.charAt(0),i=m,0==--f&&(f=Math.pow(2,d),d++)}}};return i}(),"function"==typeof o&&o.amd?o(function(){return LZString}):"undefined"!=typeof module&&null!=module&&(module.exports=LZString);
},{}],"vdkH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("../libs/lz-string.min"));function t(e){return e&&e.__esModule?e:{default:e}}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}var u=function(){function e(){n(this,e)}return a(e,null,[{key:"clone",value:function(e){if(null===e||"object"!==r(e))return e;var t={};for(var n in e.constructor===Array&&(t=[]),e)e.hasOwnProperty(n)&&(t[n]=this.clone(e[n]));return t}},{key:"requestWithPost",value:function(e,t,r){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==n.readyState&&n.status>=200&&n.status<400){var e={};try{e=JSON.parse(n.responseText),r(null,e)}catch(t){r("failed",n.status)}}},n.open("POST",e,!0),n.setRequestHeader("Content-Type","application/json"),n.send(JSON.stringify(t))}},{key:"reqWithGet",value:function(e,t){var r=new XMLHttpRequest;r.onreadystatechange=function(){4==r.readyState&&(r.status>=200&&r.status<400?t(null,r.responseText):t("failed",r.status))},r.open("GET",e,!0),r.send()}},{key:"parseLZString",value:function(e){try{var t=window.LZString.decompressFromEncodedURIComponent(e)}catch(r){throw console.error("[Error]failed to decompress data. "),r}try{return JSON.parse(t)}catch(r){throw console.error("[Error]failed to paser json. "),r}}},{key:"randArray",value:function(e){for(var t=this.clone(e),r=t.length-1;r>=0;r--){var n=Math.floor(Math.random()*(r+1)),o=t[n];t[n]=t[r],t[r]=o}return t}}]),e}();exports.default=u;
},{"../libs/lz-string.min":"L5vu"}],"WL+6":[function(require,module,exports) {
"use strict";function o(o,t){if(!(o instanceof t))throw new TypeError("Cannot call a class as a function")}function t(o,t,e){return t in o?Object.defineProperty(o,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):o[t]=e,o}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=function t(){o(this,t)};exports.default=e,t(e,"SERVER_LOG_URL","https://ginfo.592you.com/log/"),t(e,"SERVER_SHIELD_URL","https://ginfo.592you.com/block/"),t(e,"SERVER_LESS_URL","https://ginfo.592you.com/login"),t(e,"SCENE",{SCAN:1011,AUTO:1030}),t(e,"SELL_VOLUME","https://ginfo.592you.com/logstores/analytics-log/track?APIVersion=0.6.0"),t(e,"SHOW_UI_TYPE",{GAME_BOX:1,FULLSCREEN:2,HGAMEBAR:3,VGAMEBAR:4,COUPLET:5,SIX_GAMES:6,FOUR_CARDS:7,DRAWER:8,SINGLE1:9,SINGLE2:10});
},{}],"6kIQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("../../shared/utils")),t=o(require("../../shared/constants"));function o(e){return e&&e.__esModule?e:{default:e}}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,o){return t&&i(e.prototype,t),o&&i(e,o),e}var s=function(){function o(){r(this,o)}return a(o,[{key:"cosntructor",value:function(){this.isAuditor=!1,this.hadSendLog=!1}},{key:"init",value:function(){BondSDK.checkAuditor=this.checkAuditor.bind(this)}},{key:"_sendLog",value:function(o){var n=this,r=wx.getSystemInfoSync(),i={},a=["brand","model","pixelRatio","language","version","system","platform","fontSizeSetting","benchmarkLevel"];for(var s in r)-1!==a.indexOf(s)&&(i[s]=r[s]);var d={versionBondSDK:BondSDK.version,isNewBee:BondSDK.sharedData.isNewBee,gameId:BondSDK.sharedData.gameId,version:BondSDK.sharedData.version,appId:BondSDK.sharedData.appId,scene:BondSDK.scene,query:BondSDK.query,isSpecial:BondSDK.sharedData.isSpecial,isAuditor:this.isAuditor,system:i,event:"userLogin",args:o},u="".concat(t.default.SERVER_LOG_URL).concat(BondSDK.sharedData.gameId);e.default.requestWithPost(u,d,function(e,t){e?console.log("[ERROR]send log"):console.log("[INFO]send log ok"),n.hadSendLog||(n.hadSendLog=!0,BondSDK.sharedData.isNewBee=!1)})}},{key:"checkAuditor",value:function(e){this.retryTimes=0;var o=e,r=null,i=null,a=null;if("function"!=typeof o&&"object"===n(o)){var s=o;r=s.success,i=s.fail,a=s.args,o=null}if(BondSDK.query.gameAD&&1===Number(BondSDK.query.gameAD)){var d={isAuditor:!1};return this.isAuditor=d.isAuditor,r&&r(d),o&&o(null,d),void this._sendLog(a)}var u=!1,l=BondSDK.sharedData.blocks;if(l&&l.length>0)for(var c=0;c<l.length;c++)if(BondSDK.scene===Number(l[c])){u=!0;break}if(BondSDK.scene===t.default.SCENE.SCAN||BondSDK.scene===t.default.SCENE.AUTO||u){var f={isAuditor:!0};return this.isAuditor=f.isAuditor,r&&r(f),o&&o(null,f),void this._sendLog(a)}var S="".concat(t.default.SERVER_SHIELD_URL).concat(BondSDK.sharedData.gameId,"?version=").concat(BondSDK.sharedData.version,"&appId=").concat(BondSDK.sharedData.appId);this.requestAuditor(S,a,r,i,o)}},{key:"requestAuditor",value:function(t,o,n,r,i){var a=this;e.default.reqWithGet(t,function(e,s){if(e)a.retryTimes++,a.retryTimes<=3?setTimeout(function(){a.requestAuditor(t,o,n,r,i)},2e3):(r&&r("failed"),i&&i("failed"));else{var d=JSON.parse(s);d&&d.hasOwnProperty("isAuditor")?(a.isAuditor=d.isAuditor,n&&n(d),i&&i(null,d)):(r&&r(d),i&&i("failed",d)),a._sendLog(o)}})}}]),o}();exports.default=s;
},{"../../shared/utils":"vdkH","../../shared/constants":"WL+6"}],"JQWi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=o(require("../../shared/constants")),e=o(require("../../databus"));function o(n){return n&&n.__esModule?n:{default:n}}function t(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function a(n,e){for(var o=0;o<e.length;o++){var t=e[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function i(n,e,o){return e&&a(n.prototype,e),o&&a(n,o),n}var u=function(){function o(){t(this,o)}return i(o,[{key:"login",value:function(n){var o=this;window.wx&&wx.checkSession({success:function(){var t=e.default.instance.getUserId();t?n(null,t):o._wxLogin(n)},fail:function(){o._wxLogin(n)}})}},{key:"_wxLogin",value:function(n){var e=this;wx.login({success:function(o){e._code2Session(o.code,function(e,o){n(e||null,o)})},fail:function(e){console.log("bondSDK-wx login failed",e),n(e)}})}},{key:"_code2Session",value:function(e,o){var t="".concat(n.default.SERVER_LESS_URL,"/").concat(BondSDK.sharedData.appId,"/").concat(e);wx.request({url:t,success:function(n){var e=n.data.openid;if(e)o(null,e);else{var t=null;n&&(t=n.data),o("bondSDK-openid was null",t)}},fail:function(n){console.error("bondSDK-wx get openid failed!",n),o(n)}})}}]),o}();exports.default=u;
},{"../../shared/constants":"WL+6","../../databus":"RjpZ"}],"r5z2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("../../databus")),t=i(require("../../shared/utils")),a=i(require("../../shared/constants"));function i(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t,a){return t&&s(e.prototype,t),a&&s(e,a),e}var o=function(){function a(){n(this,a),this.gameList=[],this.arrRecommendGame=[],this.arrGameJsonNavigate=[],this.sellUser=null,this.isLoadFinish=!1,this.init(),this.coverNavigate()}return r(a,[{key:"init",value:function(){var t=this;this.sellUser=e.default.instance.getItem("sellUser"),""!==this.sellUser&&null!==this.sellUser&&void 0!==this.sellUser||(e.default.instance.setItem("sellUser",{}),this.sellUser={}),this._reqWhiteList(function(){t.isLoadFinish=!0})}},{key:"coverNavigate",value:function(){if(this._isNavigateSupported()&&wx.navigateToMiniProgram){wx.navigateToMiniProgram2=wx.navigateToMiniProgram,delete wx.navigateToMiniProgram;wx.navigateToMiniProgram=function(t){var a=t.appId,i=(BondSDK.openid,!1),n=e.default.instance.getItem("sellUser");""!==n&&null!=n||(e.default.instance.setItem("sellUser",{}),n={}),n.hasOwnProperty(a)?i=n[a]:(i=!0,n[a]=!1,e.default.instance.setItem("sellUser",n)),console.log("###Databus.instance",e.default.instance);var s=t.success;t.success=function(e){var t={isFirstClick:i,target:a};bondSDK.analytics.logSellEvent(t),s(e)},wx.navigateToMiniProgram2(t)}}}},{key:"parseWXGameJsonConfig",value:function(){if(window.wx){var e=null,t=wx.getFileSystemManager();e=-1!==t.readdirSync("/").indexOf("app-config.json")?t.readFileSync("app-config.json","utf-8"):t.readFileSync("game.json","utf-8");var a=JSON.parse(e.toString());a&&a.navigateToMiniProgramAppIdList&&(this.arrGameJsonNavigate=a.navigateToMiniProgramAppIdList)}}},{key:"_reqWhiteList",value:function(e){var a=this,i="https://ossconfigcdn.xxzsgame.com/".concat(bondSDK.sharedData.gameId,"/whiteList.json");bondSDK.sharedData.company&&(i="https://ossconfigcdn.xxzsgame.com/".concat(bondSDK.sharedData.company,"/").concat(bondSDK.sharedData.gameId,"/whiteList.json")),t.default.reqWithGet(i,function(i,n){if(i)return console.error(i),void setTimeout(function(){a._reqWhiteList(e)},3e4);var s=t.default.parseLZString(n);a.gameList=s.whiteList,a.arrRecommendGame=[],a.parseWXGameJsonConfig(),a.gameList.forEach(function(e){e.is_get&&(-1!==a.arrGameJsonNavigate.indexOf(e.appid)||a.arrGameJsonNavigate.length<=0)&&a.arrRecommendGame.push(e)}),a.arrRecommendGame.sort(function(e,t){return t.weigh-e.weigh}),e&&e()})}},{key:"_isNavigateSupported",value:function(){return window.wx&&this._getWXSDKVersion()>=220}},{key:"_getWXSDKVersion",value:function(){var e=wx.getSystemInfoSync().SDKVersion;return e=(e=e.replace(/\./g,"")).substring(0,3)}},{key:"getWhiteList",value:function(){return this.arrRecommendGame}}]),a}();exports.default=o;
},{"../../databus":"RjpZ","../../shared/utils":"vdkH","../../shared/constants":"WL+6"}],"DZWD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("../../shared/utils")),o=n(require("../../shared/constants"));function n(e){return e&&e.__esModule?e:{default:e}}function t(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}function s(e,o){for(var n=0;n<o.length;n++){var t=o[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function i(e,o,n){return o&&s(e.prototype,o),n&&s(e,n),e}var r=function(){function n(){t(this,n),this.arrLogs=[],this.objCommonArgs={},this.isSending=!1,this.init(),BondSDK.customEvent=this.customEvent.bind(this)}return i(n,[{key:"init",value:function(){var e=this;if(window.wx){this.objCommonArgs.bsdkv=bondSDK.version,this.objCommonArgs.appid=bondSDK.sharedData.appId;var o=wx.getSystemInfoSync();this.objCommonArgs.wsdkv=o.SDKVersion,this.objCommonArgs.wv=o.version,this.objCommonArgs.brand=o.brand,this.objCommonArgs.model=o.model,this.objCommonArgs.sys=o.system,this.objCommonArgs.bkl=o.benchmarkLevel,this.objCommonArgs.fss=o.fontSizeSetting,this.objCommonArgs.lang=o.language,this.objCommonArgs.pr=window.devicePixelRatio,this.objCommonArgs.pf=o.platform,this.objCommonArgs.sh=o.screenHeight,this.objCommonArgs.sw=o.screenWidth,this.objCommonArgs.sbh=o.statusBarHeight,this.objCommonArgs.ww=o.windowWidth,this.objCommonArgs.wh=o.windowHeight,wx.getNetworkType({success:function(o){e.objCommonArgs.nwt=o.networkType},fail:function(){}});var n=wx.getLaunchOptionsSync();this.objCommonArgs.scene=n.scene,n.query&&(this.objCommonArgs.query=JSON.stringify(n.query)),n.referrerInfo&&(this.objCommonArgs.referrerInfo=JSON.stringify(n.referrerInfo)),n.shareTicket&&(this.objCommonArgs.shareTicket=n.shareTicket)}}},{key:"logSellEvent",value:function(e){var o={type:"derive",event:"allow",data:JSON.stringify(e),at:Date.now()};this.arrLogs.push(o),this.sendLog()}},{key:"logLifeEvent",value:function(e,o){var n={type:"life",event:e,at:Date.now()},t=o;"hide"===e&&(t||(t={}),t.lastShowAt=BondSDK.lastShowAt),t&&(n.data=JSON.stringify(t)),this.arrLogs.push(n),this.sendLog()}},{key:"customEvent",value:function(e){if(e.event){var o={type:"custom",event:e.event,at:Date.now()};e.data&&(o.data=JSON.stringify(e.data)),this.arrLogs.push(o),this.sendLog()}else console.error("日志格式有误,请传入event参数")}},{key:"sendLog",value:function(){var n=this;if(!(this.arrLogs.length<=0||this.isSending)){if(!bondSDK.openid)return this.isSending=!0,void setTimeout(function(){n.isSending=!1,n.sendLog()},3e3);this.currentEvent=this.arrLogs[0];var t=e.default.clone(this.objCommonArgs);for(var s in t.openid=bondSDK.openid,this.currentEvent)t[s]=this.currentEvent[s];var i=o.default.SELL_VOLUME;for(var r in t){var a=encodeURIComponent(t[r]);i+="&".concat(r,"=").concat(a)}this.isSending=!0,e.default.reqWithGet(i,function(e,o){e?(console.error("send log error:",o),setTimeout(function(){n.isSending=!1,n.sendLog()},3e3)):(n.isSending=!1,n.arrLogs.shift(),n.sendLog())})}}}]),n}();exports.default=r;
},{"../../shared/utils":"vdkH","../../shared/constants":"WL+6"}],"Focm":[function(require,module,exports) {
"use strict";var e=s(require("./databus")),n=s(require("./modules/shield/index")),o=s(require("./modules/login/index")),i=s(require("./modules/sellUser")),t=s(require("./modules/analytics"));function s(e){return e&&e.__esModule?e:{default:e}}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.BondSDK={},BondSDK.version="1.1.7",BondSDK.isInitFinish=!1,BondSDK.query={},BondSDK.scene=null,BondSDK.openid=null,BondSDK.lastShowAt=Date.now(),window.bondSDK=BondSDK,window.wx&&(wx.onShow(function(e){var n=[e.query,e.scene];BondSDK.query=n[0],BondSDK.scene=n[1],BondSDK.lastShowAt=Date.now(),BondSDK.analytics&&BondSDK.analytics.logLifeEvent("show",e)}),wx.onHide(function(e){BondSDK.analytics&&BondSDK.analytics.logLifeEvent("hide",e)})),BondSDK.init=function(n){window.wx||console.error("当前不是微信环境，sdk开启调试模式"),this.retryTimes=0;var o=n,i=arguments[1],t=arguments[2],s=arguments[3],l=arguments[4],a=null,r="",u=[];if("string"!=typeof o&&"object"===d(o)){var c=o;o=c.gameId,i=c.version,t=c.appId,a=c.success,c.fail,l=c.isSpecial,r=c.company,s=null,c.blocks&&(u=c.blocks.split(","))}var S=e.default.instance.getItem("isNewBee");if(""===S||null==S?(this.isNewBee=!0,e.default.instance.setItem("isNewBee",!1)):this.isNewBee=!1,this.sharedData={isNewBee:this.isNewBee,gameId:o,version:i,appId:t,isSpecial:l||!1,company:r,blocks:u},this.isInitFinish=!0,this._loadModules(),console.log("sdk初始化完成! 当前sdk版本号： ".concat(BondSDK.version)),!BondSDK.scene&&window.wx){var f=wx.getLaunchOptionsSync();f&&f.hasOwnProperty("scene")&&(BondSDK.scene=f.scene,BondSDK.query=f.query)}a&&a(null),s&&s(null);var w=e.default.instance.getUserId();""!==w&&null!=w?BondSDK.openid=w:this._wxLogin(function(n,o){n||(e.default.instance.setUserId(o),BondSDK.openid=o)}),this.analytics.logLifeEvent("init")},BondSDK._loadModules=function(){this.isInitFinish&&(BondSDK.shield=new n.default,BondSDK.shield.init(),BondSDK.login=new o.default,BondSDK.sellUser=new i.default,BondSDK.analytics=new t.default)},BondSDK._wxLogin=function(n){var o=this,i=e.default.instance.getUserId();i&&""!==i&&"undefined"!==i?n(null,i):BondSDK.login.login(function(e,i){if(e){var t=i;if(t&&("10001"===t.code||"10002"===t.code)){var s="FLQG_"+bondSDK.sharedData.gameId+Date.now()+(1e4+Math.floor(1e4*Math.random()));return void n(null,s)}o.retryTimes++,o.retryTimes<=5?setTimeout(function(){o._wxLogin(n)},5e3):console.error("请确认是否在bondsdk后台配置游戏信息")}else n&&n(null,i)})};
},{"./databus":"RjpZ","./modules/shield/index":"6kIQ","./modules/login/index":"JQWi","./modules/sellUser":"r5z2","./modules/analytics":"DZWD"}]},{},["Focm"], null)
//# sourceMappingURL=/bondSDK.js.map